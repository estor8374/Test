<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Q&A Builder: HTML + PDF</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif;
            background: #f4f6fa;
            padding: 2rem 1rem;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        h1 {
            font-size: 2rem;
            font-weight: 600;
            color: #1e293b;
            text-align: center;
            margin-bottom: 2rem;
        }

        .builder-card, .preview-card {
            background: white;
            border-radius: 24px;
            padding: 2rem;
            box-shadow: 0 10px 30px -10px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }

        .builder-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.5rem;
        }

        .badge {
            background: #e2e8f0;
            color: #334155;
            padding: 0.25rem 0.75rem;
            border-radius: 100px;
            font-size: 0.875rem;
            font-weight: 500;
        }

        .qa-pair {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 20px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            position: relative;
        }

        .pair-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .pair-number {
            font-weight: 600;
            color: #0f172a;
        }

        .remove-btn {
            background: none;
            border: none;
            color: #94a3b8;
            font-size: 1.5rem;
            cursor: pointer;
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .remove-btn:hover {
            background: #fee2e2;
            color: #ef4444;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        label {
            display: block;
            font-size: 0.875rem;
            font-weight: 600;
            color: #475569;
            margin-bottom: 0.25rem;
        }

        input, textarea {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 2px solid #e2e8f0;
            border-radius: 14px;
            font-size: 1rem;
            transition: 0.2s;
        }
        input:focus, textarea:focus {
            border-color: #3b82f6;
            outline: none;
            box-shadow: 0 0 0 3px rgba(59,130,246,0.2);
        }

        textarea {
            min-height: 80px;
            resize: vertical;
        }

        .button-group {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 14px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            transition: 0.2s;
            flex: 1 1 auto;
        }

        .btn-primary {
            background: #3b82f6;
            color: white;
        }
        .btn-primary:hover {
            background: #2563eb;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px -8px #3b82f6;
        }

        .btn-success {
            background: #10b981;
            color: white;
        }
        .btn-success:hover {
            background: #059669;
            transform: translateY(-2px);
        }

        .btn-outline {
            background: white;
            border: 1px solid #cbd5e1;
            color: #334155;
        }
        .btn-outline:hover {
            background: #f1f5f9;
        }

        .preview-box {
            background: #f8fafc;
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .preview-item {
            background: white;
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1rem;
            border: 1px solid #e2e8f0;
        }

        .preview-q {
            font-weight: 600;
            color: #0f172a;
            margin-bottom: 0.5rem;
        }
        .preview-a {
            color: #334155;
            border-left: 3px solid #10b981;
            padding-left: 1rem;
            margin-top: 0.5rem;
        }

        .code-display {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 1.5rem;
            border-radius: 16px;
            font-family: 'Fira Code', monospace;
            font-size: 0.85rem;
            overflow-x: auto;
            max-height: 400px;
        }

        .footer-note {
            text-align: center;
            color: #64748b;
            margin-top: 2rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚ö° Q&A Builder: HTML + PDF</h1>

        <!-- Builder -->
        <div class="builder-card">
            <div class="builder-header">
                <h2>Create your Q&A set</h2>
                <span class="badge" id="pairCount">0 pairs</span>
            </div>
            <div id="qaPairsContainer"></div>
            <button class="btn btn-outline" onclick="addQAPair()">‚ûï Add new Q&A</button>

            <div class="button-group">
                <button class="btn btn-primary" onclick="generateCode()">
                    üîÑ Generate HTML
                </button>
                <button class="btn btn-success" onclick="previewInNewTab()">
                    üëÅÔ∏è Preview HTML (interactive)
                </button>
                <button class="btn btn-outline" onclick="downloadHTML()">
                    ‚¨áÔ∏è Download .html
                </button>
                <button class="btn btn-outline" onclick="downloadPDF()">
                    üìÑ Download PDF (no buttons)
                </button>
            </div>
        </div>

        <!-- Preview -->
        <div class="preview-card">
            <h2>Preview (static)</h2>
            <div id="staticPreview" class="preview-box">
                <p style="color:#64748b; text-align:center;">No pairs yet.</p>
            </div>

            <h2 style="margin-top: 2rem;">Generated HTML code</h2>
            <div id="htmlCode" class="code-display">
                &lt;!-- Click "Generate HTML" to see code --&gt;
            </div>
        </div>

        <div class="footer-note">
            ‚úÖ PDF output shows all questions and answers (no hide buttons).
        </div>
    </div>

    <script>
        // ========== MANAGING QA PAIRS ==========
        let pairCounter = 0;
        const container = document.getElementById('qaPairsContainer');

        function addQAPair(question = '', answer = '') {
            pairCounter++;
            const id = `pair-${pairCounter}`;
            const div = document.createElement('div');
            div.className = 'qa-pair';
            div.id = id;
            div.innerHTML = `
                <div class="pair-header">
                    <span class="pair-number">Q&A #${pairCounter}</span>
                    <button class="remove-btn" onclick="removePair('${id}')" title="Remove">‚úï</button>
                </div>
                <div class="form-group">
                    <label for="q-${pairCounter}">Question</label>
                    <input type="text" id="q-${pairCounter}" class="q-input" value="${escapeAttr(question)}" placeholder="e.g., What is React?">
                </div>
                <div class="form-group">
                    <label for="a-${pairCounter}">Answer</label>
                    <textarea id="a-${pairCounter}" class="a-input" placeholder="e.g., React is a JavaScript library...">${escapeTextarea(answer)}</textarea>
                </div>
            `;
            container.appendChild(div);
            updateCounter();
        }

        function removePair(id) {
            document.getElementById(id)?.remove();
            renumberPairs();
        }

        function renumberPairs() {
            const pairs = document.querySelectorAll('.qa-pair');
            pairs.forEach((pair, idx) => {
                const newNum = idx + 1;
                pair.id = `pair-${newNum}`;
                pair.querySelector('.pair-number').textContent = `Q&A #${newNum}`;
                pair.querySelector('.remove-btn').setAttribute('onclick', `removePair('pair-${newNum}')`);
                pair.querySelector('.q-input').id = `q-${newNum}`;
                pair.querySelector('.a-input').id = `a-${newNum}`;
            });
            pairCounter = pairs.length;
            updateCounter();
        }

        function updateCounter() {
            document.getElementById('pairCount').innerText = `${pairCounter} pair${pairCounter !== 1 ? 's' : ''}`;
        }

        function escapeAttr(str) {
            if (!str) return '';
            return str.replace(/"/g, '&quot;').replace(/'/g, '&#39;');
        }

        function escapeTextarea(str) {
            if (!str) return '';
            return str.replace(/</g, '&lt;').replace(/>/g, '&gt;');
        }

        function getAllPairs() {
            const pairs = [];
            const questions = document.querySelectorAll('.q-input');
            const answers = document.querySelectorAll('.a-input');
            for (let i = 0; i < questions.length; i++) {
                const q = questions[i].value.trim();
                const a = answers[i].value.trim();
                if (q || a) {
                    pairs.push({ q, a });
                }
            }
            return pairs;
        }

        // ========== GENERATING INTERACTIVE HTML (with show buttons) ==========
        function generateInteractiveHTML(pairs) {
            if (!pairs.length) return '<p>No content</p>';

            const items = pairs.map((p, idx) => {
                const safeQ = p.q.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;');
                const safeA = p.a.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;');
                return {
                    id: `qa-${idx}`,
                    q: safeQ || 'Question',
                    a: safeA || 'No answer provided.'
                };
            });

            let itemsHTML = '';
            items.forEach(item => {
                itemsHTML += `
                <div class="qa-item">
                    <div class="question" data-target="${item.id}">
                        <span class="q-badge">Q</span>
                        <span>${item.q}</span>
                        <button class="show-btn" data-target="${item.id}">Show Answer</button>
                    </div>
                    <div id="${item.id}" class="answer hidden">
                        <span class="a-badge">A</span>
                        <span>${item.a}</span>
                    </div>
                </div>`;
            });

            return `<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Q&A</title>
    <style>
        * { margin:0; padding:0; box-sizing:border-box; }
        body {
            font-family: system-ui, -apple-system, sans-serif;
            background: linear-gradient(145deg, #f1f5f9 0%, #e4eaf1 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 2rem;
        }
        .card {
            max-width: 800px;
            width: 100%;
            background: white;
            border-radius: 36px;
            padding: 2.5rem;
            box-shadow: 0 30px 50px -20px rgba(0,0,0,0.3);
        }
        h1 {
            text-align: center;
            color: #1e293b;
            margin-bottom: 2rem;
            font-weight: 600;
            font-size: 2.2rem;
        }
        .qa-item {
            background: #f8fafc;
            border-radius: 24px;
            margin-bottom: 1rem;
            border: 1px solid #e2e8f0;
            overflow: hidden;
        }
        .question {
            background: white;
            padding: 1.25rem 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            cursor: pointer;
            font-weight: 500;
            color: #0f172a;
            transition: 0.2s;
        }
        .question:hover {
            background: #f1f5f9;
        }
        .q-badge {
            background: #3b82f6;
            color: white;
            font-size: 0.75rem;
            font-weight: 700;
            padding: 0.2rem 0.8rem;
            border-radius: 40px;
        }
        .show-btn {
            margin-left: auto;
            background: transparent;
            border: 1px solid #3b82f6;
            color: #3b82f6;
            padding: 0.3rem 1rem;
            border-radius: 40px;
            font-weight: 600;
            font-size: 0.85rem;
            cursor: pointer;
            transition: 0.2s;
        }
        .show-btn:hover {
            background: #3b82f6;
            color: white;
        }
        .answer {
            padding: 1.25rem 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            background: #f0f9ff;
            border-top: 1px dashed #b9d4f0;
            line-height: 1.6;
            color: #1e293b;
        }
        .hidden {
            display: none;
        }
        .a-badge {
            background: #10b981;
            color: white;
            font-size: 0.75rem;
            font-weight: 700;
            padding: 0.2rem 0.8rem;
            border-radius: 40px;
        }
        .footer {
            text-align: center;
            margin-top: 2.5rem;
            color: #64748b;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="card">
        <h1>üìò Q&A Session</h1>
        ${itemsHTML}
        <div class="footer">
            Click on a question or the button to reveal the answer.
        </div>
    </div>
    <script>
        document.addEventListener('click', function(e) {
            const target = e.target.closest('[data-target]');
            if (!target) return;
            const answerId = target.getAttribute('data-target');
            const answerEl = document.getElementById(answerId);
            if (answerEl) {
                answerEl.classList.toggle('hidden');
            }
        });
    <\/script>
</body>
</html>`;
        }

        // ========== GENERATE PDF (print version, no buttons) ==========
        function generatePrintableHTML(pairs) {
            if (!pairs.length) return '<p>No content</p>';

            let itemsHTML = '';
            pairs.forEach((p, idx) => {
                const q = p.q || 'Question';
                const a = p.a || 'No answer provided.';
                itemsHTML += `
                    <div class="qa-print-item">
                        <div class="print-q"><strong>Q${idx+1}:</strong> ${q}</div>
                        <div class="print-a"><strong>A:</strong> ${a}</div>
                    </div>
                    ${idx < pairs.length-1 ? '<hr>' : ''}
                `;
            });

            return `<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Q&A PDF</title>
    <style>
        body {
            font-family: 'Helvetica', 'Arial', sans-serif;
            max-width: 800px;
            margin: 2rem auto;
            padding: 0 1.5rem;
            line-height: 1.6;
            color: #222;
        }
        h1 {
            text-align: center;
            color: #1e293b;
            border-bottom: 2px solid #ccc;
            padding-bottom: 0.5rem;
        }
        .qa-print-item {
            margin: 2rem 0;
        }
        .print-q {
            font-size: 1.2rem;
            font-weight: 600;
            color: #0f172a;
            margin-bottom: 0.5rem;
        }
        .print-a {
            font-size: 1.1rem;
            color: #334155;
            margin-left: 1.5rem;
            padding-left: 1rem;
            border-left: 4px solid #10b981;
        }
        hr {
            border: none;
            border-top: 1px dashed #aaa;
            margin: 1.5rem 0;
        }
        .footer {
            text-align: center;
            margin-top: 3rem;
            color: #64748b;
            font-size: 0.9rem;
        }
        @media print {
            body { margin: 0; }
        }
    </style>
</head>
<body>
    <h1>üìã Q&A Summary</h1>
    ${itemsHTML}
    <div class="footer">Generated on ${new Date().toLocaleString()}</div>
</body>
</html>`;
        }

        // ========== ACTIONS ==========
        function generateCode() {
            const pairs = getAllPairs();
            if (pairs.length === 0) {
                alert('Add at least one Q&A pair first.');
                return;
            }

            // Update static preview
            const previewDiv = document.getElementById('staticPreview');
            let previewHTML = '';
            pairs.forEach((p, i) => {
                previewHTML += `
                    <div class="preview-item">
                        <div class="preview-q">Q${i+1}: ${escapeTextarea(p.q) || '<em>empty</em>'}</div>
                        <div class="preview-a">A: ${escapeTextarea(p.a) || '<em>empty</em>'}</div>
                    </div>
                `;
            });
            previewDiv.innerHTML = previewHTML || '<p style="color:#64748b;">No content</p>';

            // Generate and show code
            const fullHTML = generateInteractiveHTML(pairs);
            document.getElementById('htmlCode').innerText = fullHTML;
        }

        function previewInNewTab() {
            const pairs = getAllPairs();
            if (pairs.length === 0) {
                alert('Add some Q&A first.');
                return;
            }
            const fullHTML = generateInteractiveHTML(pairs);
            const blob = new Blob([fullHTML], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            window.open(url, '_blank');
            setTimeout(() => URL.revokeObjectURL(url), 30000);
        }

        function downloadHTML() {
            const pairs = getAllPairs();
            if (pairs.length === 0) {
                alert('Add some Q&A first.');
                return;
            }
            const fullHTML = generateInteractiveHTML(pairs);
            const blob = new Blob([fullHTML], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `interactive-qa-${new Date().toISOString().slice(0,10)}.html`;
            a.click();
            URL.revokeObjectURL(url);
        }

        function downloadPDF() {
            const pairs = getAllPairs();
            if (pairs.length === 0) {
                alert('Add some Q&A first.');
                return;
            }
            const printHTML = generatePrintableHTML(pairs);
            const printWindow = window.open('', '_blank');
            printWindow.document.write(printHTML);
            printWindow.document.close();
            printWindow.focus();
            // Wait for content to load then print
            printWindow.onload = function() {
                printWindow.print();
                // Optionally close after print (user can cancel)
                // printWindow.onafterprint = () => printWindow.close();
            };
        }

        // Initialize with two examples
        window.onload = () => {
            addQAPair('What is HTML?', 'HTML (HyperText Markup Language) is the standard markup language for web pages.');
            addQAPair('What is CSS?', 'CSS (Cascading Style Sheets) describes how HTML elements are to be displayed.');
            generateCode(); // Show initial preview/code
        };
    </script>
</body>
</html>
